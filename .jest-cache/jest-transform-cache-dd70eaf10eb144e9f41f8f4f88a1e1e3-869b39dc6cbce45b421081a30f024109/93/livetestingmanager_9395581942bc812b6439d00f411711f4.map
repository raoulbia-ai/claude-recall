{"file":"/mnt/c/Users/ebiarao/repos/claude-recall/src/testing/live-testing-manager.ts","mappings":"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","names":[],"sources":["/mnt/c/Users/ebiarao/repos/claude-recall/src/testing/live-testing-manager.ts"],"sourcesContent":["import { TestOrchestrator, TestScenario, TestResult } from './test-orchestrator';\nimport { RestartContinuityManager } from '../services/restart-continuity';\nimport { MemoryService } from '../services/memory';\nimport { LoggingService } from '../services/logging';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport { exec } from 'child_process';\nimport { promisify } from 'util';\n\nconst execAsync = promisify(exec);\n\nexport interface LiveTestConfig {\n  autoRestart: boolean;\n  restartOnFailure: boolean;\n  maxRestartAttempts: number;\n  restartDelay: number; // milliseconds\n  watchFiles: string[];\n  injectResults: boolean;\n}\n\nexport interface LiveTestSession {\n  id: string;\n  startTime: number;\n  tests: TestScenario[];\n  results: Map<string, TestResult>;\n  restartAttempts: number;\n  status: 'running' | 'completed' | 'failed' | 'restarting';\n}\n\nexport class LiveTestingManager {\n  private static instance: LiveTestingManager;\n  private testOrchestrator: TestOrchestrator;\n  private continuityManager: RestartContinuityManager;\n  private memoryService: MemoryService;\n  private logger: LoggingService;\n  private currentSession: LiveTestSession | null = null;\n  private fileWatchers: Map<string, fs.FSWatcher> = new Map();\n  private config: LiveTestConfig;\n  \n  private constructor() {\n    this.memoryService = MemoryService.getInstance();\n    this.logger = LoggingService.getInstance();\n    this.continuityManager = RestartContinuityManager.getInstance();\n    this.testOrchestrator = new TestOrchestrator(this.memoryService, this.logger);\n    \n    // Link test orchestrator with continuity manager\n    this.continuityManager.setTestOrchestrator(this.testOrchestrator);\n    \n    // Default configuration\n    this.config = {\n      autoRestart: true,\n      restartOnFailure: true,\n      maxRestartAttempts: 3,\n      restartDelay: 2000,\n      watchFiles: [\n        'src/hooks/**/*.sh',\n        'src/cli/claude-recall-cli.ts',\n        'src/services/**/*.ts'\n      ],\n      injectResults: true\n    };\n    \n    this.initialize();\n  }\n  \n  static getInstance(): LiveTestingManager {\n    if (!LiveTestingManager.instance) {\n      LiveTestingManager.instance = new LiveTestingManager();\n    }\n    return LiveTestingManager.instance;\n  }\n  \n  private initialize(): void {\n    // Check if we're resuming from a restart\n    const continuityState = this.continuityManager.getCurrentState();\n    if (continuityState?.testInProgress) {\n      this.logger.info('LiveTesting', 'Resuming tests after restart', {\n        sessionId: continuityState.sessionId,\n        test: continuityState.currentTest?.name\n      });\n    }\n  }\n  \n  async startLiveTestSession(tests: TestScenario[]): Promise<string> {\n    const sessionId = `live_test_${Date.now()}`;\n    \n    this.currentSession = {\n      id: sessionId,\n      startTime: Date.now(),\n      tests,\n      results: new Map(),\n      restartAttempts: 0,\n      status: 'running'\n    };\n    \n    // Store session start in memory\n    this.memoryService.store({\n      key: `live_test/session/${sessionId}`,\n      value: {\n        id: sessionId,\n        tests: tests.map(t => t.name),\n        startTime: this.currentSession.startTime\n      },\n      type: 'live_test_session'\n    });\n    \n    // Start file watchers if auto-restart is enabled\n    if (this.config.autoRestart) {\n      this.startFileWatchers();\n    }\n    \n    // Run tests\n    await this.runTests();\n    \n    return sessionId;\n  }\n  \n  private async runTests(): Promise<void> {\n    if (!this.currentSession) return;\n    \n    for (const test of this.currentSession.tests) {\n      try {\n        // Mark test start in continuity manager\n        this.continuityManager.markTestStart(test.name, test);\n        \n        // Add checkpoint before running\n        this.continuityManager.addCheckpoint(`pre_run_${test.name}`);\n        \n        // Run the test\n        this.logger.info('LiveTesting', 'Running test', { name: test.name });\n        const result = await this.testOrchestrator.runScenario(test);\n        \n        // Store result\n        this.currentSession.results.set(test.name, result);\n        \n        // Add checkpoint after completion\n        this.continuityManager.addCheckpoint(`post_run_${test.name}`);\n        \n        // Mark test complete\n        this.continuityManager.markTestComplete(result);\n        \n        // Inject result as memory if configured\n        if (this.config.injectResults) {\n          this.injectTestResult(test.name, result);\n        }\n        \n        // Check if restart is needed based on result\n        if (result.status === 'failed' && this.config.restartOnFailure) {\n          await this.handleTestFailure(test, result);\n        }\n        \n      } catch (error) {\n        this.logger.error('LiveTesting', 'Test execution error', error as Error, {\n          test: test.name\n        });\n        \n        // Add error to continuity for recovery\n        this.continuityManager.addPendingAction('retry_test', {\n          test: test.name,\n          error: (error as Error).message\n        });\n        \n        if (this.config.restartOnFailure) {\n          await this.triggerRestart('test_error');\n        }\n      }\n    }\n    \n    // Mark session complete\n    if (this.currentSession) {\n      this.currentSession.status = 'completed';\n      this.completeLiveTestSession();\n    }\n  }\n  \n  private async handleTestFailure(test: TestScenario, result: TestResult): Promise<void> {\n    this.logger.warn('LiveTesting', 'Test failed, evaluating restart', {\n      test: test.name,\n      violations: result.observations.complianceViolations\n    });\n    \n    // Check if the failure requires a restart\n    const requiresRestart = this.evaluateRestartNeed(result);\n    \n    if (requiresRestart) {\n      // Store failure information\n      this.memoryService.store({\n        key: `test/failure/${this.currentSession?.id}/${test.name}`,\n        value: {\n          test: test.name,\n          result,\n          timestamp: Date.now(),\n          restartTriggered: true\n        },\n        type: 'test_failure'\n      });\n      \n      await this.triggerRestart('test_failure');\n    }\n  }\n  \n  private evaluateRestartNeed(result: TestResult): boolean {\n    // Restart if there are compliance violations related to hooks or CLI\n    if (result.observations.complianceViolations.length > 0) {\n      const criticalViolations = result.observations.complianceViolations.filter(v => {\n        const message = (v.message || v.type || '').toLowerCase();\n        return message.includes('hook') || message.includes('cli') || message.includes('restart');\n      });\n      return criticalViolations.length > 0;\n    }\n    \n    // Restart if suggested fix mentions restart\n    if (result.insights.suggestedFix?.includes('restart')) {\n      return true;\n    }\n    \n    return false;\n  }\n  \n  private async triggerRestart(reason: string): Promise<void> {\n    if (!this.currentSession) return;\n    \n    // Check restart attempts\n    if (this.currentSession.restartAttempts >= this.config.maxRestartAttempts) {\n      this.logger.error('LiveTesting', 'Max restart attempts reached', {\n        attempts: this.currentSession.restartAttempts\n      });\n      this.currentSession.status = 'failed';\n      return;\n    }\n    \n    this.currentSession.status = 'restarting';\n    this.currentSession.restartAttempts++;\n    \n    this.logger.info('LiveTesting', 'Triggering restart', {\n      reason,\n      attempt: this.currentSession.restartAttempts\n    });\n    \n    // Store restart event\n    this.memoryService.store({\n      key: `restart/trigger/${Date.now()}`,\n      value: {\n        reason,\n        sessionId: this.currentSession.id,\n        attempt: this.currentSession.restartAttempts,\n        timestamp: Date.now()\n      },\n      type: 'restart_trigger'\n    });\n    \n    // Wait before restart\n    await new Promise(resolve => setTimeout(resolve, this.config.restartDelay));\n    \n    // Execute restart command\n    await this.executeRestart();\n  }\n  \n  private async executeRestart(): Promise<void> {\n    try {\n      // First, rebuild the project\n      this.logger.info('LiveTesting', 'Rebuilding project before restart');\n      await execAsync('npm run build');\n      \n      // Note: In a real implementation, Claude Code would need to be restarted\n      // This is a placeholder for the actual restart mechanism\n      // The restart would be detected by the RestartContinuityManager\n      \n      this.logger.info('LiveTesting', 'Restart command executed');\n      \n      // The actual restart would terminate this process\n      // For testing purposes, we simulate the restart effect\n      this.simulateRestartEffect();\n      \n    } catch (error) {\n      this.logger.error('LiveTesting', 'Restart execution failed', error as Error);\n    }\n  }\n  \n  private simulateRestartEffect(): void {\n    // This simulates what would happen after a restart\n    // In reality, the process would restart and the RestartContinuityManager\n    // would detect it and resume operations\n    \n    this.logger.info('LiveTesting', 'Simulating restart effect');\n    \n    // Clear current session (would be restored by continuity manager)\n    const sessionBackup = { ...this.currentSession };\n    this.currentSession = null;\n    \n    // Simulate restart detection and recovery\n    setTimeout(() => {\n      this.logger.info('LiveTesting', 'Simulating restart recovery');\n      \n      // Restore session (normally done by continuity manager)\n      this.currentSession = sessionBackup as LiveTestSession;\n      if (this.currentSession) {\n        this.currentSession.status = 'running';\n      }\n      \n      // Continue tests\n      this.runTests();\n    }, 1000);\n  }\n  \n  private startFileWatchers(): void {\n    // Watch configured files for changes\n    this.config.watchFiles.forEach(pattern => {\n      const basePath = path.resolve(process.cwd());\n      \n      // Simple file watching (in production, use chokidar for glob patterns)\n      if (pattern.includes('**')) {\n        // For now, watch directories\n        const dir = pattern.split('**')[0];\n        const fullPath = path.join(basePath, dir);\n        \n        if (fs.existsSync(fullPath)) {\n          const watcher = fs.watch(fullPath, { recursive: true }, (eventType, filename) => {\n            this.handleFileChange(eventType, path.join(fullPath, filename || ''));\n          });\n          this.fileWatchers.set(pattern, watcher);\n        }\n      }\n    });\n    \n    this.logger.info('LiveTesting', 'File watchers started', {\n      patterns: this.config.watchFiles\n    });\n  }\n  \n  private handleFileChange(eventType: string, filepath: string): void {\n    this.logger.info('LiveTesting', 'File change detected', {\n      eventType,\n      filepath\n    });\n    \n    // Check if change requires restart\n    if (this.requiresRestartForFile(filepath)) {\n      this.continuityManager.addPendingAction('file_change_restart', {\n        file: filepath,\n        eventType,\n        timestamp: Date.now()\n      });\n      \n      // Trigger restart after a short delay to batch changes\n      setTimeout(() => {\n        this.triggerRestart('file_change');\n      }, 500);\n    }\n  }\n  \n  private requiresRestartForFile(filepath: string): boolean {\n    // Hooks and CLI changes always require restart\n    if (filepath.includes('/hooks/') || filepath.includes('claude-recall-cli')) {\n      return true;\n    }\n    \n    // Service changes might require restart\n    if (filepath.includes('/services/')) {\n      return true;\n    }\n    \n    return false;\n  }\n  \n  private injectTestResult(testName: string, result: TestResult): void {\n    // Inject test result as searchable memory\n    this.memoryService.store({\n      key: `test/result/injected/${testName}`,\n      value: {\n        test: testName,\n        status: result.status,\n        observations: result.observations,\n        insights: result.insights,\n        timestamp: Date.now(),\n        sessionId: this.currentSession?.id\n      },\n      type: 'test_result_injected'\n    });\n    \n    // Also inject specific insights for quick access\n    if (result.insights.suggestedFix) {\n      this.memoryService.store({\n        key: `test/insight/fix/${testName}`,\n        value: {\n          test: testName,\n          fix: result.insights.suggestedFix,\n          confidence: result.insights.confidenceLevel\n        },\n        type: 'test_fix_suggestion'\n      });\n    }\n  }\n  \n  private completeLiveTestSession(): void {\n    if (!this.currentSession) return;\n    \n    // Stop file watchers\n    this.fileWatchers.forEach(watcher => watcher.close());\n    this.fileWatchers.clear();\n    \n    // Generate session summary\n    const summary = {\n      sessionId: this.currentSession.id,\n      duration: Date.now() - this.currentSession.startTime,\n      totalTests: this.currentSession.tests.length,\n      passed: Array.from(this.currentSession.results.values()).filter(r => r.status === 'passed').length,\n      failed: Array.from(this.currentSession.results.values()).filter(r => r.status === 'failed').length,\n      restartAttempts: this.currentSession.restartAttempts,\n      results: Array.from(this.currentSession.results.entries()).map(([name, result]) => ({\n        test: name,\n        status: result.status,\n        violations: result.observations.complianceViolations.length\n      }))\n    };\n    \n    // Store summary\n    this.memoryService.store({\n      key: `live_test/summary/${this.currentSession.id}`,\n      value: summary,\n      type: 'live_test_summary'\n    });\n    \n    this.logger.info('LiveTesting', 'Session completed', summary);\n  }\n  \n  async stopLiveTestSession(): Promise<void> {\n    if (!this.currentSession) return;\n    \n    this.currentSession.status = 'completed';\n    this.completeLiveTestSession();\n    this.currentSession = null;\n  }\n  \n  getSessionStatus(): any {\n    if (!this.currentSession) {\n      return { status: 'no_active_session' };\n    }\n    \n    return {\n      sessionId: this.currentSession.id,\n      status: this.currentSession.status,\n      testsRun: this.currentSession.results.size,\n      totalTests: this.currentSession.tests.length,\n      restartAttempts: this.currentSession.restartAttempts,\n      results: Array.from(this.currentSession.results.entries()).map(([name, result]) => ({\n        test: name,\n        status: result.status\n      }))\n    };\n  }\n  \n  updateConfig(config: Partial<LiveTestConfig>): void {\n    this.config = { ...this.config, ...config };\n    this.logger.info('LiveTesting', 'Configuration updated', this.config);\n  }\n}"],"version":3}