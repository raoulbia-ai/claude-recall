{"file":"/mnt/c/Users/ebiarao/repos/claude-recall/src/core/pattern-detector.ts","mappings":"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","names":[],"sources":["/mnt/c/Users/ebiarao/repos/claude-recall/src/core/pattern-detector.ts"],"sourcesContent":["export interface DetectedPattern {\n  taskType?: string;      // 'create_test', 'fix_bug', 'refactor', 'add_feature', etc.\n  language?: string;      // 'typescript', 'python', 'javascript', etc.\n  framework?: string;     // 'react', 'express', 'jest', etc.\n  entities?: string[];    // Key entities mentioned (file names, function names, etc.)\n}\n\nexport class PatternDetector {\n  private taskTypePatterns: Map<string, RegExp[]>;\n  private languageExtensions: Map<string, string>;\n  private languageKeywords: Map<string, string[]>;\n  private frameworkPatterns: Map<string, string[]>;\n\n  constructor() {\n    this.taskTypePatterns = this.initializeTaskTypePatterns();\n    this.languageExtensions = this.initializeLanguageExtensions();\n    this.languageKeywords = this.initializeLanguageKeywords();\n    this.frameworkPatterns = this.initializeFrameworkPatterns();\n  }\n\n  detectPatterns(prompt: string): DetectedPattern {\n    return {\n      taskType: this.detectTaskType(prompt),\n      language: this.detectLanguage(prompt),\n      framework: this.detectFramework(prompt),\n      entities: this.extractEntities(prompt)\n    };\n  }\n\n  private detectTaskType(prompt: string): string | undefined {\n    const lowerPrompt = prompt.toLowerCase();\n    \n    for (const [taskType, patterns] of this.taskTypePatterns) {\n      for (const pattern of patterns) {\n        if (pattern.test(lowerPrompt)) {\n          return taskType;\n        }\n      }\n    }\n    \n    return undefined;\n  }\n\n  private detectLanguage(prompt: string): string | undefined {\n    const lowerPrompt = prompt.toLowerCase();\n    \n    // Check for file extensions\n    const fileExtPattern = /\\.(ts|js|py|java|go|rb|cpp|c|cs|php|swift|rs|kt|scala|r|m|h|mm|lua|dart|ex|exs|clj|hs|ml|jl|nim|zig)\\b/gi;\n    const matches = prompt.match(fileExtPattern);\n    if (matches && matches.length > 0) {\n      const extension = matches[0].substring(1).toLowerCase();\n      return this.languageExtensions.get(extension);\n    }\n    \n    // Check for explicit language names\n    const languageNames = [\n      { pattern: 'typescript', normalized: 'typescript' },\n      { pattern: 'javascript', normalized: 'javascript' },\n      { pattern: 'python', normalized: 'python' },\n      { pattern: 'java', normalized: 'java' },\n      { pattern: 'golang', normalized: 'go' },\n      { pattern: 'go', normalized: 'go' },\n      { pattern: 'ruby', normalized: 'ruby' },\n      { pattern: 'c\\\\+\\\\+', normalized: 'cpp' },\n      { pattern: 'cpp', normalized: 'cpp' },\n      { pattern: 'c#', normalized: 'csharp' },\n      { pattern: 'csharp', normalized: 'csharp' },\n      { pattern: 'php', normalized: 'php' },\n      { pattern: 'swift', normalized: 'swift' },\n      { pattern: 'rust', normalized: 'rust' },\n      { pattern: 'kotlin', normalized: 'kotlin' },\n      { pattern: 'scala', normalized: 'scala' },\n      { pattern: 'r', normalized: 'r' },\n      { pattern: 'objective-c', normalized: 'objc' },\n      { pattern: 'lua', normalized: 'lua' },\n      { pattern: 'dart', normalized: 'dart' },\n      { pattern: 'elixir', normalized: 'elixir' },\n      { pattern: 'clojure', normalized: 'clojure' },\n      { pattern: 'haskell', normalized: 'haskell' },\n      { pattern: 'ocaml', normalized: 'ocaml' },\n      { pattern: 'julia', normalized: 'julia' },\n      { pattern: 'nim', normalized: 'nim' },\n      { pattern: 'zig', normalized: 'zig' }\n    ];\n    \n    for (const lang of languageNames) {\n      // Special handling for patterns with special characters\n      let regex;\n      if (lang.pattern.includes('\\\\+') || lang.pattern.includes('#')) {\n        // For C++ and C#, use space boundaries instead of word boundaries\n        regex = new RegExp(`(^|\\\\s)${lang.pattern}(\\\\s|$)`, 'i');\n      } else {\n        regex = new RegExp(`\\\\b${lang.pattern}\\\\b`, 'i');\n      }\n      if (regex.test(prompt)) {\n        return lang.normalized;\n      }\n    }\n    \n    // Check for language-specific keywords\n    for (const [language, keywords] of this.languageKeywords) {\n      for (const keyword of keywords) {\n        if (lowerPrompt.includes(keyword)) {\n          return language;\n        }\n      }\n    }\n    \n    return undefined;\n  }\n\n  private detectFramework(prompt: string): string | undefined {\n    const lowerPrompt = prompt.toLowerCase();\n    \n    for (const [framework, patterns] of this.frameworkPatterns) {\n      for (const pattern of patterns) {\n        if (lowerPrompt.includes(pattern.toLowerCase())) {\n          return framework;\n        }\n      }\n    }\n    \n    return undefined;\n  }\n\n  private extractEntities(prompt: string): string[] {\n    const entities: string[] = [];\n    \n    // Extract file names (with extensions)\n    const filePattern = /\\b[\\w.-]+\\.\\w+\\b/g;\n    const fileMatches = prompt.match(filePattern);\n    if (fileMatches) {\n      entities.push(...fileMatches);\n    }\n    \n    // Extract function/method names (camelCase or snake_case followed by parentheses)\n    const functionPattern = /\\b[a-zA-Z_]\\w*(?=\\s*\\()/g;\n    const functionMatches = prompt.match(functionPattern);\n    if (functionMatches) {\n      entities.push(...functionMatches);\n    }\n    \n    // Extract quoted strings\n    const quotedPattern = /\"([^\"]+)\"|'([^']+)'/g;\n    let quotedMatch;\n    while ((quotedMatch = quotedPattern.exec(prompt)) !== null) {\n      entities.push(quotedMatch[1] || quotedMatch[2]);\n    }\n    \n    // Extract module/component references (word + module/component)\n    const modulePattern = /\\b(\\w+\\s+(?:module|component|service|controller|middleware|flow|system|mechanism))\\b/gi;\n    const moduleMatches = prompt.match(modulePattern);\n    if (moduleMatches) {\n      entities.push(...moduleMatches);\n    }\n    \n    // Extract class/module/component names (PascalCase)\n    const pascalCasePattern = /\\b[A-Z][a-zA-Z0-9]+(?:[A-Z][a-zA-Z0-9]+)*\\b/g;\n    const pascalMatches = prompt.match(pascalCasePattern);\n    if (pascalMatches) {\n      // Filter out common words that might match pattern but aren't entities\n      const commonWords = ['The', 'This', 'That', 'These', 'Those', 'There', 'Here', 'When', 'Where', 'What', 'Which', 'Who', 'Why', 'How'];\n      const filtered = pascalMatches.filter(match => !commonWords.includes(match));\n      entities.push(...filtered);\n    }\n    \n    // Remove duplicates and return\n    return [...new Set(entities)];\n  }\n\n  private initializeTaskTypePatterns(): Map<string, RegExp[]> {\n    return new Map([\n      ['create_test', [\n        /\\b(create|write|add|make|generate)\\s+(a\\s+)?tests?\\b/i,\n        /\\btest(s)?\\s+for\\b/i,\n        /\\bunit\\s+test/i,\n        /\\btest\\s+(case|suite|file)/i,\n        /\\b(write|add|create)\\s+.*\\s+test/i\n      ]],\n      ['fix_bug', [\n        /\\bfix(es|ed|ing)?\\b/i,\n        /\\b(error|bug|issue|problem)\\b/i,\n        /\\bnot\\s+working\\b/i,\n        /\\bbroken\\b/i,\n        /\\b(resolve|debug|troubleshoot)/i,\n        /\\b(fails?|failing|failed)\\b/i\n      ]],\n      ['refactor', [\n        /\\brefactor/i,\n        /\\bclean\\s+up\\b/i,\n        /\\b(improve|optimize|reorganize)\\b/i,\n        /\\b(simplify|streamline)/i,\n        /\\brestructure/i\n      ]],\n      ['add_feature', [\n        /\\b(add|implement|create|build)\\s+(?!test)/i,\n        /\\bnew\\s+(feature|functionality|capability)/i,\n        /\\b(develop|introduce)\\s+/i,\n        /\\bfeature\\s+(request|implementation)/i\n      ]],\n      ['explain', [\n        /\\bexplain/i,\n        /\\bwhat\\s+is\\b/i,\n        /\\bhow\\s+does\\b/i,\n        /\\bwhy\\s+(is|does|did)/i,\n        /\\bunderstand/i,\n        /\\bdescribe\\s+(how|what|why)/i\n      ]],\n      ['review', [\n        /\\breview/i,\n        /\\bcheck\\b.*\\b(code|implementation|logic)/i,\n        /\\banalyze\\b/i,\n        /\\baudit/i,\n        /\\b(evaluate|assess|inspect)/i,\n        /\\blook\\s+over/i\n      ]]\n    ]);\n  }\n\n  private initializeLanguageExtensions(): Map<string, string> {\n    return new Map([\n      ['ts', 'typescript'],\n      ['js', 'javascript'],\n      ['py', 'python'],\n      ['java', 'java'],\n      ['go', 'go'],\n      ['rb', 'ruby'],\n      ['cpp', 'cpp'],\n      ['c', 'c'],\n      ['cs', 'csharp'],\n      ['php', 'php'],\n      ['swift', 'swift'],\n      ['rs', 'rust'],\n      ['kt', 'kotlin'],\n      ['scala', 'scala'],\n      ['r', 'r'],\n      ['m', 'objc'],\n      ['h', 'c'],\n      ['mm', 'objc'],\n      ['lua', 'lua'],\n      ['dart', 'dart'],\n      ['ex', 'elixir'],\n      ['exs', 'elixir'],\n      ['clj', 'clojure'],\n      ['hs', 'haskell'],\n      ['ml', 'ocaml'],\n      ['jl', 'julia'],\n      ['nim', 'nim'],\n      ['zig', 'zig']\n    ]);\n  }\n\n  private initializeLanguageKeywords(): Map<string, string[]> {\n    return new Map([\n      ['typescript', ['interface', 'type alias', ': string', ': number', ': boolean', 'implements', 'namespace']],\n      ['javascript', ['async/await', 'promise', 'callback', 'arrow function', '=>']],\n      ['python', ['def ', 'import from', 'self.', '__init__', 'pip install', 'django', 'flask']],\n      ['java', ['public class', 'private void', 'public static', 'extends', 'implements', 'package ']],\n      ['go', ['func ', 'package main', 'go mod', 'goroutine', 'channel']],\n      ['rust', ['fn ', 'mut ', 'impl ', 'trait ', 'cargo']]\n    ]);\n  }\n\n  private initializeFrameworkPatterns(): Map<string, string[]> {\n    return new Map([\n      ['react', ['component', 'jsx', 'useState', 'useEffect', 'props', 'render', 'React.', '<div>', '</div>']],\n      ['express', ['router', 'middleware', 'app.get', 'app.post', 'req, res', 'express()', 'app.listen']],\n      ['jest', ['describe', 'it(', 'expect', 'toBe', 'toEqual', 'mock', 'test(', 'beforeEach', 'afterEach']],\n      ['vue', ['v-if', 'v-for', 'computed', 'mounted', 'data()', 'methods:', 'template:', 'Vue.']],\n      ['django', ['models.py', 'views.py', 'urls.py', 'admin.py', 'Model', 'View', 'urlpatterns', 'django']]\n    ]);\n  }\n}"],"version":3}