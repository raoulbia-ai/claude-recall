{"file":"/mnt/c/Users/ebiarao/repos/claude-recall/tests/integration/ai-testing-system.test.ts","mappings":"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","names":[],"sources":["/mnt/c/Users/ebiarao/repos/claude-recall/tests/integration/ai-testing-system.test.ts"],"sourcesContent":["import { MCPServer } from '../../src/mcp/server';\nimport { TestOrchestrator } from '../../src/testing/test-orchestrator';\nimport { ObservableDatabase } from '../../src/testing/observable-database';\nimport { MockClaude } from '../../src/testing/mock-claude';\nimport { ScenarioRunner } from '../../src/testing/scenario-runner';\nimport { AutoCorrectionEngine } from '../../src/testing/auto-correction-engine';\nimport { MemoryService } from '../../src/services/memory';\nimport { LoggingService } from '../../src/services/logging';\nimport { DatabaseManager } from '../../src/services/database-manager';\nimport * as path from 'path';\nimport * as fs from 'fs';\n\n/**\n * AI Testing System Integration Tests\n *\n * NOTE: These tests are for the experimental AI-powered testing system.\n * They are currently skipped as this is an advanced feature under development.\n * The core TDD functionality works independently of these tests.\n */\ndescribe.skip('AI Testing System Integration', () => {\n  let server: MCPServer;\n  let testOrchestrator: TestOrchestrator;\n  let memoryService: MemoryService;\n  let logger: LoggingService;\n  let dbManager: DatabaseManager;\n  const testDb = path.join(__dirname, '../test-claude-recall.db');\n\n  beforeAll(async () => {\n    // Clean up any existing test database\n    if (fs.existsSync(testDb)) {\n      fs.unlinkSync(testDb);\n    }\n    \n    // Initialize services\n    process.env.CLAUDE_RECALL_DB = testDb;\n    memoryService = MemoryService.getInstance();\n    logger = LoggingService.getInstance();\n    dbManager = DatabaseManager.getInstance();\n    \n    // Initialize server\n    server = new MCPServer();\n    \n    // Initialize test orchestrator\n    testOrchestrator = new TestOrchestrator(memoryService, logger);\n  });\n  \n  afterAll(async () => {\n    await server.stop();\n    dbManager.close();\n    \n    // Clean up test database\n    if (fs.existsSync(testDb)) {\n      fs.unlinkSync(testDb);\n    }\n  });\n  \n  describe('Test Orchestrator', () => {\n    test('should run memory persistence scenario successfully', async () => {\n      const result = await testOrchestrator.runScenario({\n        name: 'memory_persistence',\n        sessionId: 'test_session_1'\n      });\n      \n      expect(result).toBeDefined();\n      expect(result.scenario).toBe('memory_persistence');\n      expect(result.status).toMatch(/passed|partial/);\n      expect(result.observations.memoriesStored.length).toBeGreaterThan(0);\n    });\n    \n    test('should detect search compliance violations', async () => {\n      const result = await testOrchestrator.runScenario({\n        name: 'search_compliance',\n        sessionId: 'test_session_2'\n      });\n      \n      expect(result).toBeDefined();\n      expect(result.scenario).toBe('search_compliance');\n      \n      // Check if search compliance is tracked\n      if (result.status === 'failed') {\n        expect(result.observations.complianceViolations).toContainEqual(\n          expect.objectContaining({\n            type: 'missing_search'\n          })\n        );\n      }\n    });\n    \n    test('should observe behavior and track database changes', async () => {\n      const observation = await testOrchestrator.observeBehavior(\n        'store_memory',\n        { value: { content: 'Test memory for observation' } },\n        'test_session_3'\n      );\n      \n      expect(observation).toBeDefined();\n      expect(observation.databaseChanges.length).toBeGreaterThan(0);\n      expect(observation.complianceStatus).toBeDefined();\n    });\n    \n    test('should validate fixes with multiple scenarios', async () => {\n      const validation = await testOrchestrator.validateFix({\n        issueId: 'TEST-001',\n        fixDescription: 'Added search enforcement hook',\n        testScenarios: ['memory_persistence', 'search_compliance'],\n        sessionId: 'test_session_4'\n      });\n      \n      expect(validation).toBeDefined();\n      expect(validation.passed).toBeDefined();\n      expect(validation.confidence).toBeGreaterThanOrEqual(0);\n      expect(validation.confidence).toBeLessThanOrEqual(1);\n      expect(validation.recommendations.length).toBeGreaterThan(0);\n    });\n    \n    test('should simulate Claude interaction with different compliance levels', async () => {\n      const highCompliance = await testOrchestrator.simulateClaudeInteraction({\n        prompt: 'Create a new test file for user authentication',\n        complianceLevel: 0.9,\n        sessionId: 'test_session_5'\n      });\n      \n      const lowCompliance = await testOrchestrator.simulateClaudeInteraction({\n        prompt: 'Create a new test file for user authentication',\n        complianceLevel: 0.1,\n        sessionId: 'test_session_6'\n      });\n      \n      expect(highCompliance.toolsSelected.length).toBeGreaterThan(0);\n      expect(lowCompliance.toolsSelected.length).toBeGreaterThan(0);\n      \n      // High compliance should likely include search\n      const highComplianceHasSearch = highCompliance.toolsSelected.some(\n        t => t.name.includes('search')\n      );\n      const lowComplianceHasSearch = lowCompliance.toolsSelected.some(\n        t => t.name.includes('search')\n      );\n      \n      // Generally expect high compliance to search more often\n      expect(highComplianceHasSearch || !lowComplianceHasSearch).toBe(true);\n    });\n  });\n  \n  describe('Observable Database', () => {\n    test('should track database changes during operations', async () => {\n      const observer = new ObservableDatabase(memoryService);\n      \n      observer.startTracking();\n      \n      // Perform some operations\n      await memoryService.store({\n        key: 'test_observable_1',\n        value: { content: 'Observable test 1' },\n        type: 'test',\n        context: { sessionId: 'obs_test' }\n      });\n      \n      await memoryService.search('observable');\n      \n      const changes = observer.getChanges();\n      observer.stopTracking();\n      \n      expect(changes.length).toBeGreaterThan(0);\n      expect(changes).toContainEqual(\n        expect.objectContaining({\n          operation: 'INSERT',\n          table: 'memories'\n        })\n      );\n      expect(changes).toContainEqual(\n        expect.objectContaining({\n          operation: 'SELECT',\n          table: 'memories'\n        })\n      );\n    });\n    \n    test('should provide statistics on database operations', async () => {\n      const observer = new ObservableDatabase(memoryService);\n      \n      observer.startTracking();\n      \n      // Perform multiple operations\n      for (let i = 0; i < 3; i++) {\n        await memoryService.store({\n          key: `test_stats_${i}`,\n          value: { content: `Stat test ${i}` },\n          type: 'test',\n          context: { sessionId: 'stats_test' }\n        });\n      }\n      \n      const stats = observer.getStatistics();\n      observer.stopTracking();\n      \n      expect(stats.totalChanges).toBeGreaterThanOrEqual(3);\n      expect(stats.byOperation['INSERT']).toBeGreaterThanOrEqual(3);\n      expect(stats.byTable['memories']).toBeGreaterThanOrEqual(3);\n    });\n  });\n  \n  describe('Mock Claude Agent', () => {\n    test('should select appropriate tools based on prompt', async () => {\n      const mockClaude = new MockClaude(memoryService, logger);\n      \n      const fileCreationLog = await mockClaude.simulateInteraction(\n        'Create a new React component called Button.jsx'\n      );\n      \n      expect(fileCreationLog.toolsSelected).toContainEqual(\n        expect.objectContaining({\n          name: 'create_file'\n        })\n      );\n      \n      const memoryLog = await mockClaude.simulateInteraction(\n        'Remember that all API keys should be stored in environment variables'\n      );\n      \n      expect(memoryLog.toolsSelected).toContainEqual(\n        expect.objectContaining({\n          name: 'mcp__claude-recall__store_memory'\n        })\n      );\n    });\n    \n    test('should respect compliance level for search behavior', async () => {\n      const mockClaude = new MockClaude(memoryService, logger);\n      \n      // Test with 100% compliance\n      mockClaude.setComplianceLevel(1.0);\n      let searchCount = 0;\n      \n      for (let i = 0; i < 10; i++) {\n        const log = await mockClaude.simulateInteraction(\n          'Create a new file called test.js'\n        );\n        if (log.toolsSelected.some(t => t.name.includes('search'))) {\n          searchCount++;\n        }\n      }\n      \n      expect(searchCount).toBeGreaterThanOrEqual(8); // Should search most of the time\n      \n      // Test with 0% compliance\n      mockClaude.setComplianceLevel(0.0);\n      searchCount = 0;\n      \n      for (let i = 0; i < 10; i++) {\n        const log = await mockClaude.simulateInteraction(\n          'Create a new file called test.js'\n        );\n        if (log.toolsSelected.some(t => t.name.includes('search'))) {\n          searchCount++;\n        }\n      }\n      \n      expect(searchCount).toBeLessThanOrEqual(2); // Should rarely search\n    });\n  });\n  \n  describe('Scenario Runner', () => {\n    test('should execute predefined scenarios', async () => {\n      const runner = new ScenarioRunner(memoryService, logger);\n      \n      const result = await runner.run('memory_persistence');\n      \n      expect(result).toBeDefined();\n      expect(result.name).toBe('memory_persistence');\n      expect(result.steps.length).toBeGreaterThan(0);\n      expect(result.success).toBeDefined();\n    });\n    \n    test('should validate step expectations', async () => {\n      const runner = new ScenarioRunner(memoryService, logger);\n      \n      const result = await runner.run('context_retrieval');\n      \n      expect(result).toBeDefined();\n      expect(result.name).toBe('context_retrieval');\n      \n      // Check if memories were stored\n      const storeSteps = result.steps.filter(s => s.action === 'store_memory');\n      expect(storeSteps.length).toBeGreaterThan(0);\n      \n      // Check if search was performed\n      const searchSteps = result.steps.filter(s => s.action === 'search');\n      expect(searchSteps.length).toBeGreaterThan(0);\n    });\n    \n    test('should list all available scenarios', () => {\n      const runner = new ScenarioRunner(memoryService, logger);\n      \n      const scenarios = runner.getScenarios();\n      \n      expect(scenarios.length).toBeGreaterThan(0);\n      expect(scenarios).toContainEqual(\n        expect.objectContaining({\n          name: 'memory_persistence'\n        })\n      );\n      expect(scenarios).toContainEqual(\n        expect.objectContaining({\n          name: 'search_compliance'\n        })\n      );\n    });\n  });\n  \n  describe('Auto-Correction Engine', () => {\n    test('should analyze test failures and suggest fixes', async () => {\n      const engine = new AutoCorrectionEngine(memoryService, logger);\n      \n      const failedResult = {\n        scenario: 'search_compliance',\n        status: 'failed' as const,\n        observations: {\n          memoriesStored: [],\n          searchesPerformed: [],\n          filesCreated: [{ path: 'test.js' }],\n          complianceViolations: [{\n            type: 'missing_search',\n            message: 'Search not called before file creation'\n          }]\n        },\n        insights: {\n          rootCause: 'Memory search not triggered before file operations',\n          suggestedFix: 'Add search enforcement hook',\n          confidenceLevel: 0.8\n        },\n        reproduction: {\n          steps: ['store_memory', 'create_file'],\n          environment: { sessionId: 'test' }\n        }\n      };\n      \n      const analysis = await engine.analyzeFailure(failedResult);\n      \n      expect(analysis).toBeDefined();\n      expect(analysis.issueType).toBe('search_compliance');\n      expect(analysis.suggestedFixes.length).toBeGreaterThan(0);\n    });\n    \n    test('should generate fixes based on failure analysis', async () => {\n      const engine = new AutoCorrectionEngine(memoryService, logger);\n      \n      const analysis = {\n        issueType: 'search_compliance' as const,\n        rootCause: 'Search not triggered',\n        affectedComponents: ['hooks/memory-search-enforcer.js'],\n        suggestedFixes: [{\n          file: 'src/hooks/memory-search-enforcer.js',\n          suggested: '// Enhanced search enforcement',\n          reason: 'Force search before file operations',\n          confidence: 0.8\n        }]\n      };\n      \n      const fix = await engine.generateFix(analysis);\n      \n      expect(fix).toBeDefined();\n      expect(fix.issueType).toBe('search_compliance');\n      expect(fix.files.length).toBeGreaterThan(0);\n      expect(fix.confidence).toBeGreaterThan(0);\n    });\n    \n    test('should provide learning insights', () => {\n      const engine = new AutoCorrectionEngine(memoryService, logger);\n      \n      const insights = engine.getLearningInsights();\n      \n      expect(insights).toBeDefined();\n      expect(insights.mostCommonIssues).toBeDefined();\n      expect(insights.successRate).toBeGreaterThanOrEqual(0);\n      expect(insights.successRate).toBeLessThanOrEqual(1);\n      expect(insights.recommendedFixes).toBeDefined();\n    });\n  });\n  \n  describe('End-to-End MCP Tool Testing', () => {\n    test('should execute test scenario through MCP tool', async () => {\n      // This would require actually starting the MCP server and sending requests\n      // For now, we'll test the tool handler directly\n      \n      const testTools = (server as any).tools.get('mcp__test__run_scenario');\n      expect(testTools).toBeDefined();\n      \n      if (testTools) {\n        const result = await testTools.handler(\n          { scenario: 'memory_persistence' },\n          { sessionId: 'e2e_test', timestamp: Date.now() }\n        );\n        \n        expect(result).toBeDefined();\n        expect(result.scenario).toBe('memory_persistence');\n        expect(result.status).toBeDefined();\n      }\n    });\n    \n    test('should simulate Claude behavior through MCP tool', async () => {\n      const testTools = (server as any).tools.get('mcp__test__simulate_claude');\n      expect(testTools).toBeDefined();\n      \n      if (testTools) {\n        const result = await testTools.handler(\n          {\n            prompt: 'Create a test file for the authentication module',\n            complianceLevel: 0.8\n          },\n          { sessionId: 'e2e_test_2', timestamp: Date.now() }\n        );\n        \n        expect(result).toBeDefined();\n        expect(result.toolsSelected).toBeDefined();\n        expect(result.complianceMatched).toBeDefined();\n      }\n    });\n  });\n});"],"version":3}