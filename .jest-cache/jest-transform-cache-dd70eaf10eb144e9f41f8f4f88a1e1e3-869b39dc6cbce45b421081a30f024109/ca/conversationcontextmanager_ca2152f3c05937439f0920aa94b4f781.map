{"file":"/mnt/c/Users/ebiarao/repos/claude-recall/src/services/conversation-context-manager.ts","mappings":";AAAA;;;;;;;;;GASG;;;AAEH,uCAA2C;AAmB3C,MAAa,0BAA0B;IAerC;QAXA,kEAAkE;QAC1D,mBAAc,GAAgC,IAAI,GAAG,EAAE,CAAC;QAEhE,wCAAwC;QAChC,iBAAY,GAAwB,IAAI,GAAG,EAAE,CAAC;QAEtD,gBAAgB;QACC,4BAAuB,GAAG,EAAE,CAAC;QAC7B,+BAA0B,GAAG,CAAC,CAAC,CAAC,qBAAqB;QACrD,oBAAe,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC,aAAa;QAG9D,IAAI,CAAC,MAAM,GAAG,wBAAc,CAAC,WAAW,EAAE,CAAC;IAC7C,CAAC;IAED,MAAM,CAAC,WAAW;QAChB,IAAI,CAAC,0BAA0B,CAAC,QAAQ,EAAE,CAAC;YACzC,0BAA0B,CAAC,QAAQ,GAAG,IAAI,0BAA0B,EAAE,CAAC;QACzE,CAAC;QACD,OAAO,0BAA0B,CAAC,QAAQ,CAAC;IAC7C,CAAC;IAED;;OAEG;IACH,YAAY,CACV,SAAiB,EACjB,MAAc,EACd,KAAU,EACV,MAAW;QAEX,IAAI,CAAC;YACH,yBAAyB;YACzB,MAAM,WAAW,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;YAChE,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;YAE9C,uDAAuD;YACvD,MAAM,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAEzD,MAAM,MAAM,GAAiB;gBAC3B,MAAM;gBACN,SAAS;gBACT,SAAS,EAAE,IAAI,CAAC,GAAG,EAAE;gBACrB,UAAU,EAAE,WAAW;gBACvB,KAAK;gBACL,MAAM;gBACN,SAAS;aACV,CAAC;YAEF,2CAA2C;YAC3C,MAAM,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;YACzD,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAErB,kDAAkD;YAClD,IAAI,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,uBAAuB,EAAE,CAAC;gBAClD,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,gBAAgB;YACnC,CAAC;YAED,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;YAE5C,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,4BAA4B,EAAE,iBAAiB,EAAE;gBACjE,SAAS;gBACT,MAAM;gBACN,SAAS;gBACT,IAAI,EAAE,WAAW;gBACjB,YAAY,EAAE,OAAO,CAAC,MAAM;aAC7B,CAAC,CAAC;QAEL,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,4BAA4B,EAAE,yBAAyB,EAAE,KAAK,CAAC,CAAC;QACpF,CAAC;IACH,CAAC;IAED;;OAEG;IACH,iBAAiB,CACf,SAAiB,EACjB,MAAc,EACd,KAAU;QAEV,IAAI,CAAC;YACH,MAAM,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YACnD,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACrC,OAAO,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC;YAChC,CAAC;YAED,MAAM,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YACzD,MAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAE1D,kDAAkD;YAClD,MAAM,aAAa,GAAG,OAAO;iBAC1B,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,WAAW,GAAG,CAAC,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC,0BAA0B,CAAC;iBAC5E,OAAO,EAAE,CAAC,CAAC,oBAAoB;YAElC,KAAK,MAAM,cAAc,IAAI,aAAa,EAAE,CAAC;gBAC3C,0CAA0C;gBAC1C,IAAI,cAAc,CAAC,SAAS,KAAK,SAAS,EAAE,CAAC;oBAC3C,MAAM,UAAU,GAAG,WAAW,GAAG,cAAc,CAAC,UAAU,CAAC;oBAE3D,OAAO;wBACL,WAAW,EAAE,IAAI;wBACjB,cAAc;wBACd,UAAU;wBACV,UAAU,EAAE,IAAI,CAAC,2BAA2B,CAAC,cAAc,EAAE,UAAU,CAAC;qBACzE,CAAC;gBACJ,CAAC;YACH,CAAC;YAED,OAAO,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC;QAEhC,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,4BAA4B,EAAE,+BAA+B,EAAE,KAAK,CAAC,CAAC;YACxF,OAAO,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC;QAChC,CAAC;IACH,CAAC;IAED;;OAEG;IACH,gBAAgB,CAAC,SAAiB,EAAE,QAAgB,EAAE;QACpD,MAAM,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;QACzD,OAAO,OAAO,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,oBAAoB;IAC9D,CAAC;IAED;;OAEG;IACH,eAAe,CAAC,SAAiB,EAAE,MAAc;QAC/C,MAAM,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACnD,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YACrC,OAAO,IAAI,CAAC;QACd,CAAC;QAED,mCAAmC;QACnC,KAAK,IAAI,CAAC,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;YAC7C,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,MAAM,EAAE,CAAC;gBACjC,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;YAC3B,CAAC;QACH,CAAC;QAED,OAAO,IAAI,CAAC;IACd,CAAC;IAED;;OAEG;IACH,YAAY,CAAC,SAAiB;QAC5B,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QACtC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QAEpC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,4BAA4B,EAAE,yBAAyB,EAAE;YACzE,SAAS;SACV,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACH,OAAO;QACL,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QACvB,IAAI,YAAY,GAAG,CAAC,CAAC;QAErB,KAAK,MAAM,CAAC,SAAS,EAAE,OAAO,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,EAAE,CAAC;YACjE,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACzB,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;gBAC7B,YAAY,EAAE,CAAC;gBACf,SAAS;YACX,CAAC;YAED,iCAAiC;YACjC,MAAM,UAAU,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAC/C,IAAI,CAAC,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;gBACxD,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;gBAC7B,YAAY,EAAE,CAAC;YACjB,CAAC;QACH,CAAC;QAED,IAAI,YAAY,GAAG,CAAC,EAAE,CAAC;YACrB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,4BAA4B,EAAE,yBAAyB,EAAE;gBACxE,eAAe,EAAE,YAAY;aAC9B,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED;;OAEG;IACH,QAAQ;QAKN,MAAM,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;QAChD,MAAM,YAAY,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC;aAC1D,MAAM,CAAC,CAAC,GAAG,EAAE,OAAO,EAAE,EAAE,CAAC,GAAG,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACrD,MAAM,wBAAwB,GAAG,cAAc,GAAG,CAAC;YACjD,CAAC,CAAC,YAAY,GAAG,cAAc;YAC/B,CAAC,CAAC,CAAC,CAAC;QAEN,OAAO;YACL,cAAc;YACd,YAAY;YACZ,wBAAwB,EAAE,IAAI,CAAC,KAAK,CAAC,wBAAwB,GAAG,EAAE,CAAC,GAAG,EAAE;SACzE,CAAC;IACJ,CAAC;IAED,+CAA+C;IAE/C;;;OAGG;IACK,kBAAkB,CAAC,MAAc,EAAE,KAAU;QACnD,yBAAyB;QACzB,IAAI,GAAG,GAAG,MAAM,CAAC,WAAW,EAAE,CAAC;QAE/B,6CAA6C;QAC7C,IAAI,KAAK,EAAE,CAAC;YACV,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE,CAAC;gBAC9B,gEAAgE;gBAChE,GAAG,IAAI,GAAG,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;YAC/D,CAAC;iBAAM,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE,CAAC;gBACrC,iCAAiC;gBACjC,MAAM,cAAc,GAAG,CAAC,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;gBAC5D,MAAM,QAAQ,GAAa,EAAE,CAAC;gBAE9B,KAAK,MAAM,KAAK,IAAI,cAAc,EAAE,CAAC;oBACnC,IAAI,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC;wBACjB,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC;wBACxD,QAAQ,CAAC,IAAI,CAAC,GAAG,KAAK,IAAI,KAAK,EAAE,CAAC,CAAC;oBACrC,CAAC;gBACH,CAAC;gBAED,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;oBACxB,GAAG,IAAI,GAAG,GAAG,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAClC,CAAC;YACH,CAAC;QACH,CAAC;QAED,0CAA0C;QAC1C,IAAI,GAAG,CAAC,MAAM,GAAG,GAAG,EAAE,CAAC;YACrB,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QAC9B,CAAC;QAED,OAAO,GAAG,CAAC;IACb,CAAC;IAED;;OAEG;IACK,2BAA2B,CACjC,cAA4B,EAC5B,UAAkB;QAElB,MAAM,WAAW,GAAa,EAAE,CAAC;QAEjC,IAAI,UAAU,KAAK,CAAC,EAAE,CAAC;YACrB,WAAW,CAAC,IAAI,CAAC,6DAA6D,CAAC,CAAC;QAClF,CAAC;aAAM,IAAI,UAAU,KAAK,CAAC,EAAE,CAAC;YAC5B,WAAW,CAAC,IAAI,CAAC,8CAA8C,CAAC,CAAC;QACnE,CAAC;aAAM,CAAC;YACN,WAAW,CAAC,IAAI,CAAC,2BAA2B,UAAU,aAAa,CAAC,CAAC;QACvE,CAAC;QAED,kCAAkC;QAClC,QAAQ,cAAc,CAAC,MAAM,EAAE,CAAC;YAC9B,KAAK,qBAAqB;gBACxB,WAAW,CAAC,IAAI,CAAC,sGAAsG,CAAC,CAAC;gBACzH,MAAM;YAER,KAAK,iBAAiB;gBACpB,WAAW,CAAC,IAAI,CAAC,2FAA2F,CAAC,CAAC;gBAC9G,MAAM;YAER,KAAK,cAAc;gBACjB,WAAW,CAAC,IAAI,CAAC,4FAA4F,CAAC,CAAC;gBAC/G,MAAM;YAER;gBACE,WAAW,CAAC,IAAI,CAAC,uFAAuF,CAAC,CAAC;QAC9G,CAAC;QAED,OAAO,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC/B,CAAC;CACF;AAjSD,gEAiSC","names":[],"sources":["/mnt/c/Users/ebiarao/repos/claude-recall/src/services/conversation-context-manager.ts"],"sourcesContent":["/**\n * Conversation Context Manager\n * Phase 4 Extension: Track recent actions within conversation to detect duplicates\n *\n * This service:\n * 1. Records recent actions performed (tool calls, analyses, searches)\n * 2. Detects duplicate requests within the same conversation\n * 3. Provides context-aware responses instead of repetition\n * 4. Maintains short-term memory of current conversation flow\n */\n\nimport { LoggingService } from './logging';\n\nexport interface ActionRecord {\n  action: string;           // Type of action (e.g., \"analyze_preferences\", \"search_memories\")\n  actionKey: string;        // Normalized key for duplicate detection\n  timestamp: number;        // When action was performed\n  turnNumber: number;       // Which turn in the conversation\n  input: any;               // Input that triggered the action\n  result: any;              // Result of the action\n  sessionId: string;        // Session this action belongs to\n}\n\nexport interface DuplicateDetectionResult {\n  isDuplicate: boolean;\n  previousAction?: ActionRecord;\n  turnsSince?: number;\n  suggestion?: string;\n}\n\nexport class ConversationContextManager {\n  private static instance: ConversationContextManager;\n  private logger: LoggingService;\n\n  // Track actions per session: sessionId -> array of action records\n  private sessionActions: Map<string, ActionRecord[]> = new Map();\n\n  // Track current turn number per session\n  private sessionTurns: Map<string, number> = new Map();\n\n  // Configuration\n  private readonly MAX_ACTIONS_PER_SESSION = 50;\n  private readonly DUPLICATE_DETECTION_WINDOW = 3; // Check last 3 turns\n  private readonly SESSION_TIMEOUT = 30 * 60 * 1000; // 30 minutes\n\n  private constructor() {\n    this.logger = LoggingService.getInstance();\n  }\n\n  static getInstance(): ConversationContextManager {\n    if (!ConversationContextManager.instance) {\n      ConversationContextManager.instance = new ConversationContextManager();\n    }\n    return ConversationContextManager.instance;\n  }\n\n  /**\n   * Record an action that was performed\n   */\n  recordAction(\n    sessionId: string,\n    action: string,\n    input: any,\n    result: any\n  ): void {\n    try {\n      // Increment turn counter\n      const currentTurn = (this.sessionTurns.get(sessionId) || 0) + 1;\n      this.sessionTurns.set(sessionId, currentTurn);\n\n      // Create normalized action key for duplicate detection\n      const actionKey = this.normalizeActionKey(action, input);\n\n      const record: ActionRecord = {\n        action,\n        actionKey,\n        timestamp: Date.now(),\n        turnNumber: currentTurn,\n        input,\n        result,\n        sessionId\n      };\n\n      // Get or create action history for session\n      const actions = this.sessionActions.get(sessionId) || [];\n      actions.push(record);\n\n      // Keep only recent actions (prevent memory bloat)\n      if (actions.length > this.MAX_ACTIONS_PER_SESSION) {\n        actions.shift(); // Remove oldest\n      }\n\n      this.sessionActions.set(sessionId, actions);\n\n      this.logger.debug('ConversationContextManager', 'Recorded action', {\n        sessionId,\n        action,\n        actionKey,\n        turn: currentTurn,\n        totalActions: actions.length\n      });\n\n    } catch (error) {\n      this.logger.error('ConversationContextManager', 'Failed to record action', error);\n    }\n  }\n\n  /**\n   * Check if an action was recently performed (duplicate detection)\n   */\n  checkForDuplicate(\n    sessionId: string,\n    action: string,\n    input: any\n  ): DuplicateDetectionResult {\n    try {\n      const actions = this.sessionActions.get(sessionId);\n      if (!actions || actions.length === 0) {\n        return { isDuplicate: false };\n      }\n\n      const actionKey = this.normalizeActionKey(action, input);\n      const currentTurn = this.sessionTurns.get(sessionId) || 0;\n\n      // Search recent actions (within detection window)\n      const recentActions = actions\n        .filter(a => (currentTurn - a.turnNumber) <= this.DUPLICATE_DETECTION_WINDOW)\n        .reverse(); // Most recent first\n\n      for (const previousAction of recentActions) {\n        // Check if same action with similar input\n        if (previousAction.actionKey === actionKey) {\n          const turnsSince = currentTurn - previousAction.turnNumber;\n\n          return {\n            isDuplicate: true,\n            previousAction,\n            turnsSince,\n            suggestion: this.generateDuplicateSuggestion(previousAction, turnsSince)\n          };\n        }\n      }\n\n      return { isDuplicate: false };\n\n    } catch (error) {\n      this.logger.error('ConversationContextManager', 'Failed to check for duplicate', error);\n      return { isDuplicate: false };\n    }\n  }\n\n  /**\n   * Get recent actions for a session\n   */\n  getRecentActions(sessionId: string, limit: number = 10): ActionRecord[] {\n    const actions = this.sessionActions.get(sessionId) || [];\n    return actions.slice(-limit).reverse(); // Most recent first\n  }\n\n  /**\n   * Get the result of a recent action\n   */\n  getRecentResult(sessionId: string, action: string): any | null {\n    const actions = this.sessionActions.get(sessionId);\n    if (!actions || actions.length === 0) {\n      return null;\n    }\n\n    // Find most recent matching action\n    for (let i = actions.length - 1; i >= 0; i--) {\n      if (actions[i].action === action) {\n        return actions[i].result;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Clear session context (when session ends or times out)\n   */\n  clearSession(sessionId: string): void {\n    this.sessionActions.delete(sessionId);\n    this.sessionTurns.delete(sessionId);\n\n    this.logger.debug('ConversationContextManager', 'Cleared session context', {\n      sessionId\n    });\n  }\n\n  /**\n   * Clean up old sessions\n   */\n  cleanup(): void {\n    const now = Date.now();\n    let removedCount = 0;\n\n    for (const [sessionId, actions] of this.sessionActions.entries()) {\n      if (actions.length === 0) {\n        this.clearSession(sessionId);\n        removedCount++;\n        continue;\n      }\n\n      // Check if session has timed out\n      const lastAction = actions[actions.length - 1];\n      if ((now - lastAction.timestamp) > this.SESSION_TIMEOUT) {\n        this.clearSession(sessionId);\n        removedCount++;\n      }\n    }\n\n    if (removedCount > 0) {\n      this.logger.info('ConversationContextManager', 'Cleaned up old sessions', {\n        removedSessions: removedCount\n      });\n    }\n  }\n\n  /**\n   * Get statistics about tracked sessions\n   */\n  getStats(): {\n    activeSessions: number;\n    totalActions: number;\n    averageActionsPerSession: number;\n  } {\n    const activeSessions = this.sessionActions.size;\n    const totalActions = Array.from(this.sessionActions.values())\n      .reduce((sum, actions) => sum + actions.length, 0);\n    const averageActionsPerSession = activeSessions > 0\n      ? totalActions / activeSessions\n      : 0;\n\n    return {\n      activeSessions,\n      totalActions,\n      averageActionsPerSession: Math.round(averageActionsPerSession * 10) / 10\n    };\n  }\n\n  // ========== PRIVATE HELPER METHODS ==========\n\n  /**\n   * Normalize action key for duplicate detection\n   * This creates a consistent identifier for similar actions\n   */\n  private normalizeActionKey(action: string, input: any): string {\n    // Start with action type\n    let key = action.toLowerCase();\n\n    // Add relevant input parameters (normalized)\n    if (input) {\n      if (typeof input === 'string') {\n        // Normalize string input (lowercase, trim, remove extra spaces)\n        key += ':' + input.toLowerCase().trim().replace(/\\s+/g, ' ');\n      } else if (typeof input === 'object') {\n        // Extract key fields from object\n        const relevantFields = ['query', 'content', 'type', 'name'];\n        const keyParts: string[] = [];\n\n        for (const field of relevantFields) {\n          if (input[field]) {\n            const value = String(input[field]).toLowerCase().trim();\n            keyParts.push(`${field}:${value}`);\n          }\n        }\n\n        if (keyParts.length > 0) {\n          key += ':' + keyParts.join('|');\n        }\n      }\n    }\n\n    // Truncate to prevent extremely long keys\n    if (key.length > 200) {\n      key = key.substring(0, 200);\n    }\n\n    return key;\n  }\n\n  /**\n   * Generate helpful suggestion when duplicate is detected\n   */\n  private generateDuplicateSuggestion(\n    previousAction: ActionRecord,\n    turnsSince: number\n  ): string {\n    const suggestions: string[] = [];\n\n    if (turnsSince === 0) {\n      suggestions.push('I just performed this exact action in my previous response.');\n    } else if (turnsSince === 1) {\n      suggestions.push('I performed this action in my last response.');\n    } else {\n      suggestions.push(`I performed this action ${turnsSince} turns ago.`);\n    }\n\n    // Add action-specific suggestions\n    switch (previousAction.action) {\n      case 'analyze_preferences':\n        suggestions.push('Did you want me to re-analyze with different criteria, or were you looking for the previous results?');\n        break;\n\n      case 'search_memories':\n        suggestions.push('Did you want to search with different keywords, or see the previous search results again?');\n        break;\n\n      case 'store_memory':\n        suggestions.push('The memory has already been stored. Did you want to update it or store a different memory?');\n        break;\n\n      default:\n        suggestions.push('Did you mean something different, or would you like me to repeat the previous result?');\n    }\n\n    return suggestions.join(' ');\n  }\n}\n"],"version":3}