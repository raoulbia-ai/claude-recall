{"file":"/mnt/c/Users/ebiarao/repos/claude-recall/src/core/patterns.ts","mappings":";;;AAOA,MAAa,eAAe;IAC1B,gBAAgB,CAAC,QAAgB,EAAE,QAAgB;QACjD,IAAI,QAAQ,KAAK,QAAQ;YAAE,OAAO,IAAI,CAAC;QAEvC,sBAAsB;QACtB,MAAM,OAAO,GAAG;YACd,QAAQ,EAAE,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC;YACvC,SAAS,EAAE,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC;YACxC,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,QAAQ,CAAC;YAC/C,SAAS,EAAE,CAAC;SACb,CAAC;QAEF,OAAO,OAAO,CAAC;IACjB,CAAC;IAEO,cAAc,CAAC,IAAY;QACjC,gCAAgC;QAChC,kEAAkE;QAClE,IAAI,OAAO,GAAG,IAAI,CAAC;QAEnB,0EAA0E;QAC1E,MAAM,YAAY,GAAsD,EAAE,CAAC;QAE3E,kBAAkB;QAClB,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,sCAAsC,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,EAAE;YAClF,YAAY,CAAC,IAAI,CAAC,EAAC,KAAK,EAAE,MAAM,EAAE,GAAG,EAAE,MAAM,GAAG,KAAK,CAAC,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAC,CAAC,CAAC;YAC/E,OAAO,QAAQ,CAAC;QAClB,CAAC,CAAC,CAAC;QAEH,4DAA4D;QAC5D,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,QAAQ,CAAC,CAAC;QAE1D,2CAA2C;QAC3C,MAAM,QAAQ,GAAG,CAAC,UAAU,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM;YACzD,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ;YAChE,QAAQ,EAAE,QAAQ,CAAC,CAAC,CAAC,mCAAmC;QAE1E,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,6BAA6B,EAAE,CAAC,KAAK,EAAE,EAAE;YACjE,IAAI,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;gBAC7B,OAAO,KAAK,CAAC;YACf,CAAC;YACD,OAAO,YAAY,CAAC;QACtB,CAAC,CAAC,CAAC;QAEH,OAAO,OAAO,CAAC;IACjB,CAAC;IAEO,aAAa,CAAC,QAAgB,EAAE,QAAgB;QACtD,4BAA4B;QAC5B,IAAI,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE,CAAC;YACnE,OAAO,sBAAsB,CAAC;QAChC,CAAC;QACD,IAAI,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;YACvF,OAAO,sBAAsB,CAAC;QAChC,CAAC;QACD,IAAI,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;YACrD,OAAO,eAAe,CAAC;QACzB,CAAC;QACD,OAAO,SAAS,CAAC;IACnB,CAAC;CACF;AA5DD,0CA4DC","names":[],"sources":["/mnt/c/Users/ebiarao/repos/claude-recall/src/core/patterns.ts"],"sourcesContent":["export interface CorrectionPattern {\n  original: string;\n  corrected: string;\n  context: string;\n  frequency: number;\n}\n\nexport class PatternDetector {\n  detectCorrection(original: string, modified: string): CorrectionPattern | null {\n    if (original === modified) return null;\n    \n    // Basic diff analysis\n    const pattern = {\n      original: this.extractPattern(original),\n      corrected: this.extractPattern(modified),\n      context: this.detectContext(original, modified),\n      frequency: 1\n    };\n    \n    return pattern;\n  }\n  \n  private extractPattern(code: string): string {\n    // Extract generalizable pattern\n    // Process in order: strings first, then numbers, then identifiers\n    let pattern = code;\n    \n    // Track positions of already replaced content to avoid double replacement\n    const replacements: Array<{start: number, end: number, text: string}> = [];\n    \n    // Replace strings\n    pattern = pattern.replace(/\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'/g, (match, offset) => {\n      replacements.push({start: offset, end: offset + match.length, text: 'STRING'});\n      return 'STRING';\n    });\n    \n    // Replace numbers (but not inside already replaced strings)\n    pattern = pattern.replace(/\\b\\d+(?:\\.\\d+)?\\b/g, 'NUMBER');\n    \n    // Replace identifiers, preserving keywords\n    const keywords = ['function', 'const', 'let', 'var', 'return', 'if', 'else', \n                      'for', 'while', 'class', 'interface', 'type', 'import', 'export',\n                      'STRING', 'NUMBER']; // Add our placeholders as keywords\n    \n    pattern = pattern.replace(/\\b[a-zA-Z_][a-zA-Z0-9_]*\\b/g, (match) => {\n      if (keywords.includes(match)) {\n        return match;\n      }\n      return 'IDENTIFIER';\n    });\n    \n    return pattern;\n  }\n  \n  private detectContext(original: string, modified: string): string {\n    // Detect the type of change\n    if (original.includes('function') || modified.includes('function')) {\n      return 'function-declaration';\n    }\n    if (original.includes('const') || original.includes('let') || original.includes('var')) {\n      return 'variable-declaration';\n    }\n    if (original.includes('(') && original.includes(')')) {\n      return 'function-call';\n    }\n    return 'general';\n  }\n}"],"version":3}