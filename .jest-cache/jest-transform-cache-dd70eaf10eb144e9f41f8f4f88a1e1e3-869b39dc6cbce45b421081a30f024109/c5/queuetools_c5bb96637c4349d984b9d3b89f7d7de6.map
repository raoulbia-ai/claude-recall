{"file":"/mnt/c/Users/ebiarao/repos/claude-recall/src/mcp/queue-tools.ts","mappings":"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","names":[],"sources":["/mnt/c/Users/ebiarao/repos/claude-recall/src/mcp/queue-tools.ts"],"sourcesContent":["import { QueueIntegrationService, MCPQueueIntegration } from '../services/queue-integration';\nimport { QueueAPI } from '../services/queue-api';\nimport { LoggingService } from '../services/logging';\n\n/**\n * MCP Tools for queue management and monitoring\n * These tools provide Claude Code with queue system capabilities\n */\nexport class QueueMCPTools {\n  private queueAPI: QueueAPI;\n  private integrationService: QueueIntegrationService;\n  private mcpIntegration: MCPQueueIntegration;\n  private logger = LoggingService.getInstance();\n\n  constructor() {\n    this.queueAPI = QueueAPI.getInstance();\n    this.integrationService = QueueIntegrationService.getInstance();\n    this.mcpIntegration = MCPQueueIntegration.getInstance();\n  }\n\n  /**\n   * Get available queue MCP tools\n   */\n  getToolsDefinition(): any[] {\n    return [\n      {\n        name: 'mcp__claude-recall__queue_status',\n        description: 'Get queue system status and health information',\n        inputSchema: {\n          type: 'object',\n          properties: {\n            queue_name: {\n              type: 'string',\n              description: 'Optional specific queue name to check'\n            }\n          }\n        }\n      },\n      {\n        name: 'mcp__claude-recall__queue_stats',\n        description: 'Get detailed statistics for queues',\n        inputSchema: {\n          type: 'object',\n          properties: {\n            queue_name: {\n              type: 'string',\n              description: 'Specific queue name to get stats for'\n            }\n          }\n        }\n      },\n      {\n        name: 'mcp__claude-recall__queue_peek',\n        description: 'Peek at pending messages in a queue without removing them',\n        inputSchema: {\n          type: 'object',\n          properties: {\n            queue_name: {\n              type: 'string',\n              description: 'Name of the queue to peek into',\n              enum: ['hook-events', 'mcp-operations', 'memory-operations', 'pattern-detection']\n            },\n            limit: {\n              type: 'number',\n              description: 'Maximum number of messages to peek at',\n              default: 10,\n              minimum: 1,\n              maximum: 100\n            }\n          },\n          required: ['queue_name']\n        }\n      },\n      {\n        name: 'mcp__claude-recall__queue_enqueue',\n        description: 'Manually enqueue a message for processing',\n        inputSchema: {\n          type: 'object',\n          properties: {\n            queue_name: {\n              type: 'string',\n              description: 'Name of the queue to add message to',\n              enum: ['hook-events', 'mcp-operations', 'memory-operations', 'pattern-detection']\n            },\n            message_type: {\n              type: 'string',\n              description: 'Type of message being enqueued'\n            },\n            payload: {\n              type: 'object',\n              description: 'Message payload data'\n            },\n            priority: {\n              type: 'number',\n              description: 'Message priority (higher numbers = higher priority)',\n              default: 0,\n              minimum: 0,\n              maximum: 10\n            },\n            delay_ms: {\n              type: 'number',\n              description: 'Delay before processing (milliseconds)',\n              minimum: 0\n            }\n          },\n          required: ['queue_name', 'message_type', 'payload']\n        }\n      },\n      {\n        name: 'mcp__claude-recall__dead_letter_queue',\n        description: 'Get messages from the dead letter queue',\n        inputSchema: {\n          type: 'object',\n          properties: {\n            limit: {\n              type: 'number',\n              description: 'Maximum number of messages to retrieve',\n              default: 20,\n              minimum: 1,\n              maximum: 100\n            }\n          }\n        }\n      },\n      {\n        name: 'mcp__claude-recall__requeue_dead_letter',\n        description: 'Requeue messages from dead letter queue back to processing',\n        inputSchema: {\n          type: 'object',\n          properties: {\n            message_ids: {\n              type: 'array',\n              description: 'Array of dead letter message IDs to requeue',\n              items: {\n                type: 'number'\n              },\n              minItems: 1\n            }\n          },\n          required: ['message_ids']\n        }\n      },\n      {\n        name: 'mcp__claude-recall__queue_cleanup',\n        description: 'Manually trigger cleanup of old completed messages',\n        inputSchema: {\n          type: 'object',\n          properties: {\n            older_than_days: {\n              type: 'number',\n              description: 'Remove completed messages older than this many days',\n              default: 1,\n              minimum: 0.1,\n              maximum: 30\n            }\n          }\n        }\n      }\n    ];\n  }\n\n  /**\n   * Handle queue MCP tool calls\n   */\n  async handleToolCall(toolName: string, input: any): Promise<any> {\n    try {\n      this.logger.info('QueueMCPTools', `Handling tool call: ${toolName}`, { input });\n\n      switch (toolName) {\n        case 'mcp__claude-recall__queue_status':\n          return await this.handleQueueStatus(input);\n\n        case 'mcp__claude-recall__queue_stats':\n          return await this.handleQueueStats(input);\n\n        case 'mcp__claude-recall__queue_peek':\n          return await this.handleQueuePeek(input);\n\n        case 'mcp__claude-recall__queue_enqueue':\n          return await this.handleQueueEnqueue(input);\n\n        case 'mcp__claude-recall__dead_letter_queue':\n          return await this.handleDeadLetterQueue(input);\n\n        case 'mcp__claude-recall__requeue_dead_letter':\n          return await this.handleRequeueDeadLetter(input);\n\n        case 'mcp__claude-recall__queue_cleanup':\n          return await this.handleQueueCleanup(input);\n\n        default:\n          throw new Error(`Unknown queue tool: ${toolName}`);\n      }\n    } catch (error) {\n      this.logger.error('QueueMCPTools', `Error handling tool call: ${toolName}`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Handle queue status requests\n   */\n  private async handleQueueStatus(input: { queue_name?: string }): Promise<any> {\n    const health = this.integrationService.getSystemHealth();\n    \n    if (input.queue_name) {\n      const stats = this.integrationService.getQueueStats(input.queue_name);\n      return {\n        queue_name: input.queue_name,\n        stats,\n        system_health: health,\n        timestamp: new Date().toISOString()\n      };\n    }\n\n    const allStats = this.integrationService.getQueueStats() as any[];\n    return {\n      system_health: health,\n      queue_stats: allStats,\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  /**\n   * Handle queue statistics requests\n   */\n  private async handleQueueStats(input: { queue_name?: string }): Promise<any> {\n    if (input.queue_name) {\n      const stats = this.integrationService.getQueueStats(input.queue_name);\n      return {\n        queue_name: input.queue_name,\n        ...stats,\n        timestamp: new Date().toISOString()\n      };\n    }\n\n    const allStats = this.integrationService.getQueueStats() as any[];\n    return {\n      queues: allStats,\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  /**\n   * Handle queue peek requests\n   */\n  private async handleQueuePeek(input: { queue_name: string; limit?: number }): Promise<any> {\n    const limit = input.limit || 10;\n    const messages = this.queueAPI.peekMessages(input.queue_name, limit);\n    \n    return {\n      queue_name: input.queue_name,\n      messages,\n      count: messages.length,\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  /**\n   * Handle queue enqueue requests\n   */\n  private async handleQueueEnqueue(input: {\n    queue_name: string;\n    message_type: string;\n    payload: any;\n    priority?: number;\n    delay_ms?: number;\n  }): Promise<any> {\n    const messageId = this.queueAPI['queueSystem'].enqueue(\n      input.queue_name,\n      input.message_type,\n      input.payload,\n      {\n        priority: input.priority,\n        scheduledAt: input.delay_ms ? Date.now() + input.delay_ms : undefined\n      }\n    );\n\n    return {\n      success: true,\n      message_id: messageId,\n      queue_name: input.queue_name,\n      message_type: input.message_type,\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  /**\n   * Handle dead letter queue requests\n   */\n  private async handleDeadLetterQueue(input: { limit?: number }): Promise<any> {\n    const limit = input.limit || 20;\n    const messages = this.integrationService.getDeadLetterMessages(limit);\n    \n    return {\n      messages,\n      count: messages.length,\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  /**\n   * Handle requeue from dead letter requests\n   */\n  private async handleRequeueDeadLetter(input: { message_ids: number[] }): Promise<any> {\n    const requeuedCount = this.integrationService.requeueFromDeadLetter(input.message_ids);\n    \n    return {\n      success: true,\n      requeued_count: requeuedCount,\n      requested_count: input.message_ids.length,\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  /**\n   * Handle queue cleanup requests\n   */\n  private async handleQueueCleanup(input: { older_than_days?: number }): Promise<any> {\n    const olderThanDays = input.older_than_days || 1;\n    const cleanedCount = this.queueAPI.purgeCompletedMessages(olderThanDays);\n    \n    return {\n      success: true,\n      cleaned_count: cleanedCount,\n      older_than_days: olderThanDays,\n      timestamp: new Date().toISOString()\n    };\n  }\n}\n\n/**\n * Enhanced memory tools that integrate with the queue system\n */\nexport class EnhancedMemoryMCPTools {\n  private queueAPI: QueueAPI;\n  private mcpIntegration: MCPQueueIntegration;\n  private logger = LoggingService.getInstance();\n\n  constructor() {\n    this.queueAPI = QueueAPI.getInstance();\n    this.mcpIntegration = MCPQueueIntegration.getInstance();\n  }\n\n  /**\n   * Get enhanced memory tool definitions\n   */\n  getToolsDefinition(): any[] {\n    return [\n      {\n        name: 'mcp__claude-recall__async_memory_search',\n        description: 'Perform asynchronous memory search with queue-based processing',\n        inputSchema: {\n          type: 'object',\n          properties: {\n            query: {\n              type: 'string',\n              description: 'Search query for memory retrieval'\n            },\n            context: {\n              type: 'object',\n              description: 'Context information for search',\n              properties: {\n                projectId: { type: 'string' },\n                filePath: { type: 'string' },\n                sessionId: { type: 'string' }\n              }\n            },\n            priority: {\n              type: 'number',\n              description: 'Search priority (1-10, higher is more urgent)',\n              default: 5,\n              minimum: 1,\n              maximum: 10\n            }\n          },\n          required: ['query']\n        }\n      },\n      {\n        name: 'mcp__claude-recall__async_pattern_detection',\n        description: 'Queue content for asynchronous pattern detection and analysis',\n        inputSchema: {\n          type: 'object',\n          properties: {\n            content: {\n              type: 'string',\n              description: 'Content to analyze for patterns'\n            },\n            context: {\n              type: 'object',\n              description: 'Context information for pattern detection',\n              properties: {\n                type: { type: 'string' },\n                projectId: { type: 'string' },\n                filePath: { type: 'string' },\n                sessionId: { type: 'string' }\n              }\n            },\n            priority: {\n              type: 'number',\n              description: 'Processing priority (1-10)',\n              default: 3,\n              minimum: 1,\n              maximum: 10\n            }\n          },\n          required: ['content']\n        }\n      },\n      {\n        name: 'mcp__claude-recall__bulk_memory_operation',\n        description: 'Perform bulk memory operations asynchronously through the queue',\n        inputSchema: {\n          type: 'object',\n          properties: {\n            operations: {\n              type: 'array',\n              description: 'Array of memory operations to perform',\n              items: {\n                type: 'object',\n                properties: {\n                  operation: {\n                    type: 'string',\n                    enum: ['store', 'search', 'update', 'delete'],\n                    description: 'Type of memory operation'\n                  },\n                  payload: {\n                    type: 'object',\n                    description: 'Operation-specific data'\n                  }\n                },\n                required: ['operation', 'payload']\n              },\n              minItems: 1,\n              maxItems: 50\n            },\n            batch_priority: {\n              type: 'number',\n              description: 'Priority for the entire batch',\n              default: 4,\n              minimum: 1,\n              maximum: 10\n            }\n          },\n          required: ['operations']\n        }\n      }\n    ];\n  }\n\n  /**\n   * Handle enhanced memory tool calls\n   */\n  async handleToolCall(toolName: string, input: any): Promise<any> {\n    try {\n      this.logger.info('EnhancedMemoryMCPTools', `Handling tool call: ${toolName}`, { input });\n\n      switch (toolName) {\n        case 'mcp__claude-recall__async_memory_search':\n          return await this.handleAsyncMemorySearch(input);\n\n        case 'mcp__claude-recall__async_pattern_detection':\n          return await this.handleAsyncPatternDetection(input);\n\n        case 'mcp__claude-recall__bulk_memory_operation':\n          return await this.handleBulkMemoryOperation(input);\n\n        default:\n          throw new Error(`Unknown enhanced memory tool: ${toolName}`);\n      }\n    } catch (error) {\n      this.logger.error('EnhancedMemoryMCPTools', `Error handling tool call: ${toolName}`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Handle asynchronous memory search\n   */\n  private async handleAsyncMemorySearch(input: {\n    query: string;\n    context?: any;\n    priority?: number;\n  }): Promise<any> {\n    const messageId = this.mcpIntegration.processMemorySearch(\n      input.query,\n      input.context || {}\n    );\n\n    return {\n      success: true,\n      message_id: messageId,\n      query: input.query,\n      status: 'queued_for_processing',\n      estimated_processing_time: '1-5 seconds',\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  /**\n   * Handle asynchronous pattern detection\n   */\n  private async handleAsyncPatternDetection(input: {\n    content: string;\n    context?: any;\n    priority?: number;\n  }): Promise<any> {\n    const messageId = this.queueAPI.enqueuePatternDetection(\n      input.content,\n      input.context || {},\n      {\n        priority: input.priority || 3,\n        correlationId: `pattern-${Date.now()}`\n      }\n    );\n\n    return {\n      success: true,\n      message_id: messageId,\n      content_length: input.content.length,\n      status: 'queued_for_analysis',\n      estimated_processing_time: '5-15 seconds',\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  /**\n   * Handle bulk memory operations\n   */\n  private async handleBulkMemoryOperation(input: {\n    operations: Array<{ operation: string; payload: any }>;\n    batch_priority?: number;\n  }): Promise<any> {\n    const messageIds: number[] = [];\n    const batchId = `batch-${Date.now()}`;\n    const priority = input.batch_priority || 4;\n\n    for (let i = 0; i < input.operations.length; i++) {\n      const op = input.operations[i];\n      const messageId = this.queueAPI.enqueueMemoryOperation(\n        op.operation as any,\n        op.payload,\n        {\n          priority,\n          correlationId: `${batchId}-${i}`\n        }\n      );\n      messageIds.push(messageId);\n    }\n\n    return {\n      success: true,\n      batch_id: batchId,\n      message_ids: messageIds,\n      operations_count: input.operations.length,\n      status: 'batch_queued_for_processing',\n      estimated_processing_time: `${Math.ceil(input.operations.length / 10)}-${Math.ceil(input.operations.length / 2)} seconds`,\n      timestamp: new Date().toISOString()\n    };\n  }\n}\n\n/**\n * Integration helper to add queue tools to existing MCP server\n */\nexport class MCPQueueToolsIntegration {\n  private queueTools: QueueMCPTools;\n  private enhancedMemoryTools: EnhancedMemoryMCPTools;\n  private logger = LoggingService.getInstance();\n\n  constructor() {\n    this.queueTools = new QueueMCPTools();\n    this.enhancedMemoryTools = new EnhancedMemoryMCPTools();\n  }\n\n  /**\n   * Get all queue-related MCP tools\n   */\n  getAllToolsDefinition(): any[] {\n    return [\n      ...this.queueTools.getToolsDefinition(),\n      ...this.enhancedMemoryTools.getToolsDefinition()\n    ];\n  }\n\n  /**\n   * Handle any queue-related MCP tool call\n   */\n  async handleToolCall(toolName: string, input: any): Promise<any> {\n    if (toolName.includes('queue_') || toolName.includes('dead_letter') || toolName.includes('cleanup')) {\n      return await this.queueTools.handleToolCall(toolName, input);\n    } else if (toolName.includes('async_') || toolName.includes('bulk_')) {\n      return await this.enhancedMemoryTools.handleToolCall(toolName, input);\n    } else {\n      throw new Error(`Tool not handled by queue integration: ${toolName}`);\n    }\n  }\n\n  /**\n   * Initialize the queue tools integration\n   */\n  async initialize(): Promise<void> {\n    // Ensure queue integration service is initialized\n    const integrationService = QueueIntegrationService.getInstance();\n    await integrationService.initialize();\n\n    this.logger.info('MCPQueueToolsIntegration', 'Queue tools integration initialized');\n  }\n}"],"version":3}